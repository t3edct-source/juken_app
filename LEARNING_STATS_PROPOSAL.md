# 学習統計ページ 実装案

## 📊 表示する統計情報

### 1. **総合統計（サマリー）**
- **総学習時間**: 全レッスンの学習時間の合計
- **完了レッスン数**: 完了したレッスンの数 / 全レッスン数
- **平均正答率**: 全レッスンの平均正答率
- **総問題数**: 回答した問題の総数
- **連続学習日数**: 現在の連続学習日数とレベル

### 2. **教科別統計**
- **理科わかる編**: 完了数、平均正答率、学習時間
- **理科おぼえる編**: 完了数、平均正答率、学習時間
- **社会わかる編**: 完了数、平均正答率、学習時間
- **社会おぼえる編**: 完了数、平均正答率、学習時間

### 3. **学年別統計**
- **小4**: 完了数、平均正答率
- **小5**: 完了数、平均正答率
- **小6**: 完了数、平均正答率

### 4. **学習履歴（時系列）**
- **最近の学習**: 直近10件の学習記録
  - レッスン名、日時、正答率、学習時間
- **学習カレンダー**: 日別の学習回数（ビジュアル表示）

### 5. **達成度**
- **完了レッスン一覧**: 完了したレッスンのリスト
- **未完了レッスン一覧**: まだ完了していないレッスンのリスト
- **進捗率**: 教科別・学年別の進捗率（プログレスバー）

## 🎨 UIデザイン案

### レイアウト構成

```
┌─────────────────────────────────────┐
│  📊 学習統計                         │
├─────────────────────────────────────┤
│                                     │
│  【総合統計カード】                  │
│  ┌─────────┬─────────┬─────────┐   │
│  │ 総学習  │ 完了    │ 平均    │   │
│  │ 時間    │ レッスン│ 正答率  │   │
│  │ 12時間  │ 15/50   │ 85%     │   │
│  └─────────┴─────────┴─────────┘   │
│                                     │
│  【教科別統計】                      │
│  ┌─────────────────────────────┐   │
│  │ 理科わかる編  │ 完了: 5/20   │   │
│  │ 平均正答率: 88%              │   │
│  │ [████████░░] 25%            │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ 理科おぼえる編│ 完了: 3/20   │   │
│  │ 平均正答率: 82%              │   │
│  │ [█████░░░░░] 15%            │   │
│  └─────────────────────────────┘   │
│  ...                                │
│                                     │
│  【学年別統計】                      │
│  ┌─────────┬─────────┬─────────┐   │
│  │ 小4      │ 小5      │ 小6      │   │
│  │ 完了: 3  │ 完了: 8  │ 完了: 4  │   │
│  │ 正答率:  │ 正答率:  │ 正答率:  │   │
│  │ 90%      │ 85%      │ 80%      │   │
│  └─────────┴─────────┴─────────┘   │
│                                     │
│  【最近の学習】                      │
│  ┌─────────────────────────────┐   │
│  │ 2025/01/15 10:30             │   │
│  │ 物体の運動とてこ             │   │
│  │ 正答率: 90% | 時間: 12分    │   │
│  └─────────────────────────────┘   │
│  ...                                │
│                                     │
│  [閉じる]                           │
└─────────────────────────────────────┘
```

## 📱 レスポンシブ対応

- **モバイル**: 縦スクロール、カードを縦に並べる
- **デスクトップ**: 2-3カラムレイアウト、より詳細な情報を表示

## 🔧 実装のポイント

### データ収集関数

```javascript
// 統計データを収集
function collectLearningStats() {
  const stats = {
    total: {
      lessonsCompleted: 0,
      totalLessons: 0,
      totalTime: 0,
      totalQuestions: 0,
      correctAnswers: 0,
      averageScore: 0
    },
    bySubject: {},
    byGrade: {},
    recentSessions: []
  };
  
  // localStorageから全進捗データを取得
  // カタログから全レッスン情報を取得
  // 統計を計算
  
  return stats;
}
```

### 表示関数

```javascript
// 統計ページを表示
function showStatsPage() {
  const stats = collectLearningStats();
  // モーダルまたは専用ページを表示
  renderStatsModal(stats);
}
```

## 🎯 実装優先度

### Phase 1（基本機能）
1. ✅ 総合統計の表示
2. ✅ 教科別統計の表示
3. ✅ 最近の学習履歴の表示

### Phase 2（拡張機能）
4. ⭐ 学年別統計の表示
5. ⭐ 学習カレンダーの表示
6. ⭐ 完了/未完了レッスン一覧

### Phase 3（高度な機能）
7. 🔮 グラフ表示（Chart.jsなど）
8. 🔮 学習傾向の分析
9. 🔮 目標設定と達成度表示

## 💡 UI/UXの工夫

1. **視覚的なフィードバック**
   - プログレスバーで進捗を可視化
   - 色分け（緑=完了、黄=進行中、灰=未着手）

2. **モチベーション向上**
   - 達成度のパーセンテージ表示
   - 連続学習日数の強調表示
   - 励ましメッセージ

3. **操作性**
   - モーダル形式で表示（メニューから開く）
   - 閉じるボタンを明確に配置
   - スクロール可能な長いリスト

