# 問題データ修正手順書（汎用手順）

## 概要
この手順書は、レッスンの問題データ（JavaScriptファイル）の品質を向上させるための標準的な修正手順をまとめたものです。どの単元にも適用できる汎用的な手順です。

---

## 修正手順

### ステップ1: 単元の確認と現状把握
**目的**: 修正対象の単元の現状を把握する

1. **対象ファイルの特定**
   - 修正対象のJavaScriptファイルを特定
   - 単元IDとタイトルを確認

2. **現状の記録**
   - 問題数を確認
   - 各問題の選択肢数を確認（3択、4択、5択など）
   - 問題文、選択肢、正解番号、解説の有無を確認

3. **チェックリストの作成**
   - 修正が必要な項目をリストアップ
   - 優先順位を決定

---

### ステップ2: 正解番号の検証と修正（第1回）
**目的**: 解説内容と選択肢の整合性を確認し、正解番号の誤りを修正する

1. **検証方法**
   - 各問題の解説（`source`フィールド）を確認
   - 解説に記載されている正解内容と、`choices[answer]`の内容が一致しているか確認
   - 問題文の意図と正解が一致しているか確認

2. **修正対象の特定**
   - 解説と選択肢が一致しない問題をリストアップ
   - 問題文の意図と正解が一致しない問題をリストアップ

3. **修正の実施**
   - `answer`フィールドを正しいインデックスに修正
   - 修正後、再度整合性を確認

4. **記録**
   - 修正した問題番号、修正前後の値を記録

---

### ステップ3: 重複問題の特定と対処
**目的**: 同じ内容や類似内容の問題を特定し、重複を解消する

1. **重複の特定方法**
   - 問題文を比較し、同じ内容の問題を特定
   - 選択肢が同じ組み合わせの問題を特定
   - 解説が同じ内容の問題を特定

2. **対処方法の選択**
   - **方法A: 削除**
     - 完全に重複している問題は削除
     - より質の高い問題を残す
   - **方法B: 内容の変更**
     - 重複しているが、異なる角度から問う場合は内容を変更
   - **方法C: 思考型への変換**
     - 知識問題から思考型問題に変更（後述のステップ7参照）

3. **削除の実施**
   - 重複問題を削除
   - 削除した問題番号を記録

4. **問題番号の振り直し**
   - 削除後、残った問題を1から連番で振り直し
   - 配列のインデックスと問題番号の整合性を確認

---

### ステップ4: 選択肢数の統一
**目的**: すべての問題の選択肢数を統一する（通常は4択に統一）

1. **現状の確認**
   - 各問題の選択肢数を確認
   - 最も多い選択肢数を基準にするか、4択に統一するかを決定

2. **選択肢の追加または削除**
   - **選択肢が少ない場合**: 適切な誤答選択肢を追加
   - **選択肢が多い場合**: 最も質の低い選択肢を削除

3. **正解番号の確認**
   - 選択肢を追加・削除した後、正解番号が正しいか確認
   - 必要に応じて修正

---

### ステップ5: 選択肢の質の改善
**目的**: 選択肢を同一カテゴリに統一し、質の高い誤答選択肢にする

1. **選択肢の分類**
   - 各問題の選択肢がどのカテゴリに属するか確認
   - 例: 器具名、物質名、状態変化、数値、要因など

2. **不適切な選択肢の特定**
   - 異なるカテゴリが混在している選択肢を特定
   - 明らかに不適切な誤答選択肢を特定
   - 他の問題の正解が混入している選択肢を特定

3. **選択肢の修正**
   - 同一カテゴリの選択肢に統一
   - 適切な誤答選択肢に変更
   - 選択肢の順序を適切に並べ替え

4. **正解番号の再確認**
   - 選択肢を変更した後、正解番号が正しいか確認
   - 必要に応じて修正

---

### ステップ6: 正解番号の再検証（第2回）
**目的**: 選択肢変更後の正解番号が正しいか最終確認する

1. **全問題の再確認**
   - ステップ5で変更した問題の正解番号を再確認
   - 問題文、選択肢、解説の整合性を確認

2. **修正の実施**
   - 誤りがあれば修正
   - 修正内容を記録

---

### ステップ7: 重複問題の解消（思考型への変換）
**目的**: 重複している問題を思考型問題に変換して多様性を確保する

1. **変換対象の特定**
   - 重複している問題のうち、思考型に変換できる問題を特定
   - 単純な知識問題から、計算や推論を要する問題に変換可能か判断

2. **思考型問題への変換方法**
   - **問題文の変更**
     - 「何で決まる？」→「2倍にしたらどうなる？」
     - 「何が正しい？」→「計算するとどうなる？」
   - **選択肢の変更**
     - 知識選択肢から数値や状態変化の選択肢に変更
   - **難易度の調整**
     - `difficulty`フィールドを1→2に変更（思考型のため）
   - **解説の更新**
     - 計算過程や思考過程を解説に追加

3. **正解番号の確認**
   - 変換後、正解番号が正しいか確認

---

## 最終確認項目

修正完了後、以下の項目を確認：

- [ ] すべての問題の正解番号が正しい
- [ ] 重複問題が解消されている
- [ ] 選択肢数が統一されている（通常は4択）
- [ ] 選択肢が同一カテゴリに統一されている
- [ ] 問題番号が1から連番になっている
- [ ] 解説（`source`フィールド）が適切に記載されている
- [ ] 画像パス（`source`内の画像参照）が正しい

---

## 修正のポイント

1. **正解番号の確認**: 解説内容と選択肢の整合性を常に確認
2. **重複の解消**: 同じ内容の問題を削除または変更
3. **選択肢の統一**: 同一カテゴリの選択肢に統一し、質を向上
4. **思考型問題の追加**: 単純な知識問題から思考を要する問題へ変更
5. **段階的な修正**: 一度にすべてを修正せず、段階的に進める
6. **記録の徹底**: 修正内容を記録し、後で確認できるようにする

---

## 注意事項

- 修正は段階的に行い、各ステップごとに確認する
- 選択肢を変更した場合は、必ず正解番号を再確認する
- 問題を削除した場合は、問題番号を振り直す
- 修正後は、実際にアプリケーションで動作確認を行う
- 画像パスが正しいか確認する（画像が表示されるか）

---

## 修正記録テンプレート

```markdown
## 修正記録

### 実施日
YYYY年MM月DD日

### 対象ファイル
`path/to/file.js`

### 修正内容
- ステップ2: 正解番号修正 X問
- ステップ3: 重複問題削除 X問
- ステップ4: 選択肢数統一（X択→4択）
- ステップ5: 選択肢質改善 X問
- ステップ6: 正解番号再確認 X問
- ステップ7: 思考型問題追加 X問

### 最終結果
- 問題数: X問 → Y問
- 選択肢: すべて4択に統一
- 重複: 解消済み
- 選択肢の質: 同一カテゴリに統一
- 正解番号: すべて修正済み
```

