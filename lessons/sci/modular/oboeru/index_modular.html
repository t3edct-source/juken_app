<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>中学受験理科｜学習</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- 戻るボタン（画面左上に固定） -->
  <button id="backBtn" onclick="goBack()" style="position: fixed; top: 20px; left: 20px; z-index: 1000; padding: 12px 18px; background: linear-gradient(135deg, #ea580c, #f97316); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 600; box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-2px) scale(1.05)'; this.style.boxShadow='0 6px 16px rgba(234, 88, 12, 0.4)'" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 4px 12px rgba(234, 88, 12, 0.3)'">← 戻る</button>
  
  <div class="question-box">
    <!-- 固定表示部分（問題文まで） -->
    <div class="question-header">
      <div id="modeLabel"></div>
      <div id="eraLabel" style="margin-bottom: 0.5rem; font-weight:700;"></div>
      <h2 id="question"></h2>
    </div>
    <!-- スクロール可能部分（説明文、選択肢など） -->
    <div class="question-content">
      <div class="source" id="source"></div>
      <div class="choices" id="choices"></div>
      <div class="explanation" id="explanation"></div>
      <div class="navigation-buttons">
        <button id="nextBtn">次の問題へ</button>
      </div>
      <div id="historyDisplay"></div>
    </div>
  </div>

  <script src="loader.js"></script>
  <script src="script.js"></script>
  <script>
        const eraMap = {
      // 生物
      'sci.biology.animal_classification_oboeru': '動物の分類',
      'sci.biology.bones_muscles_senses_oboeru': '骨と筋肉, 感覚器',
      'sci.biology.digestion_absorption_oboeru': '消化と吸収',
      'sci.biology.environment_energy_oboeru': '環境問題 エネルギー問題',
      'sci.biology.food_chain_oboeru': '生物のつながり（食物連鎖）',
      'sci.biology.heart_blood_circulation_oboeru': '心臓と血液のじゅんかん',
      'sci.biology.human_birth_oboeru': 'ヒトのたんじょう',
      'sci.biology.human_body_digestion_respiration_oboeru': '人体①（消化・呼吸・血液）',
      'sci.biology.human_body_nervous_motion_oboeru': '人体②（神経・運動）',
      'sci.biology.insect_body_lifecycle_oboeru': 'こん虫のからだと育ち方',
      'sci.biology.living_things_seasons_oboeru': '生物のくらしと四季',
      'sci.biology.medaka_lifecycle_oboeru': 'メダカの育ち方',
      'sci.biology.microscope_water_organisms_oboeru': 'けんび鏡 水中の小さな生物',
      'sci.biology.photosynthesis_oboeru': '光合成のしくみ',
      'sci.biology.plant_classification_oboeru': '植物のなかま分け',
      'sci.biology.plant_structure_oboeru': '植物の成長',
      'sci.biology.plant_structure_transpiration_integrated_oboeru': '植物のつくりとはたらき',
      'sci.biology.plants_growth_light_oboeru': '植物の成長',
      'sci.biology.plants_observation_oboeru': '花のつくりと受粉',
      'sci.biology.respiration_excretion_oboeru': '呼吸と排出',
      'sci.biology.seasons_living_things_oboeru': '季節と生物（春）',
      'sci.biology.seasons_living_things_summer_oboeru': '季節と生物（夏〜冬）',
      'sci.biology.seeds_germination_oboeru': '種子のつくりと発芽',
      'sci.biology.transpiration_respiration_oboeru': '植物のつくりとはたらき',
      // 化学
      'sci.chemistry.air_combustion_integrated_oboeru': '空気と燃焼',      'sci.chemistry.dissolution_solution_oboeru': '物の溶け方（溶解・水溶液・飽和）',
      'sci.chemistry.neutralization_oboeru': '中 和',
      'sci.chemistry.physics_heat_transfer_oboeru': 'メスシリンダー, ろ過、 ガスバーナー',
      'sci.chemistry.physics_lab_equipment_oboeru': 'メスシリンダー, ろ過、 ガスバーナー',      'sci.chemistry.solution_integrated_oboeru': '水溶液（溶解度・とけ方・濃さ）',
      'sci.chemistry.solution_metal_reaction_oboeru': '水よう液と金属の反応',
      'sci.chemistry.various_gases_oboeru': 'いろいろな気体',
      'sci.chemistry.water_state_integrated_oboeru': '水の状態変化（統合）',      // 総合
      'sci.comprehensive.animals_comprehensive_oboeru': '動物総合',
      'sci.comprehensive.astronomy_comprehensive_oboeru': '天体総合（太陽・月・地球・惑星）',
      'sci.comprehensive.biology_comprehensive_oboeru': '生物総合',
      'sci.comprehensive.chemistry_comprehensive_oboeru': '化学総合',
      'sci.comprehensive.combustion_comprehensive_oboeru': '気体・燃焼総合（計算含む）',
      'sci.comprehensive.earth_science_comprehensive_oboeru': '地学総合',
      'sci.comprehensive.electricity_comprehensive_oboeru': '電気総合（回路／電力／発熱）',
      'sci.comprehensive.human_body_comprehensive_oboeru': 'ヒトの体総合（全分野の横断）',
      'sci.comprehensive.light_sound_comprehensive_oboeru': '光・音の総合',
      'sci.comprehensive.mechanics_comprehensive_oboeru': '力学総合（てこ／滑車／ばね／浮力）',
      'sci.comprehensive.physics_comprehensive_advanced_oboeru': '物理総合（最難関中対応）',
      'sci.comprehensive.physics_comprehensive_oboeru': '物理総合',
      'sci.comprehensive.strata_comprehensive_oboeru': '大地の変化総合（地層／化石／火山／地震）',
      'sci.comprehensive.water_solution_comprehensive_oboeru': '水溶液総合（酸・アルカリ・中和）',
      'sci.comprehensive.weather_comprehensive_oboeru': '気象総合（前線／台風／天気図読み取り）',
      // 地学
      'sci.earth.clouds_fronts_weather_map_oboeru': '気象（雲・前線・天気図）',      'sci.earth.earthquake_basic_oboeru': '地震の基礎',
      'sci.earth.earthquake_structure_oboeru': '地震のしくみ',
      'sci.earth.fossils_strata_oboeru': '化石と地層のようす',
      'sci.earth.front_weather_land_sea_breeze_oboeru': '前線と天気, 海陸風',
      'sci.earth.japan_weather_oboeru': '日本の天気',
      'sci.earth.land_river_erosion_oboeru': '流水と地形の変化',
      'sci.earth.moon_movement_oboeru': '月の動き',
      'sci.earth.river_work_oboeru': '川のはたらき',
      'sci.earth.rocks_oboeru': '岩石',
      'sci.earth.solar_system_oboeru': '太陽系',
      'sci.earth.stars_constellations_integrated_oboeru': '星と星座・星の動き',
      'sci.earth.strata_formation_oboeru': '地層のでき方',
      'sci.earth.sun_movement_oboeru': '太陽の動き',
      'sci.earth.sun_movement_shadow_oboeru': '太陽と影（基礎）',
      'sci.earth.temperature_changes_oboeru': '気温の変化',
      'sci.earth.various_landforms_oboeru': 'いろいろな地形',
      'sci.earth.volcano_structure_land_change_integrated_oboeru': '火山のしくみ・火山と大地の変化統合版',      'sci.earth.weather_changes_oboeru': '天気の変化',
      'sci.earth.weather_observation_pressure_wind_oboeru': '気象の観測と雲のでき方',
      // 物理
      'sci.physics.balance_oboeru': '上皿てんびん',
      'sci.physics.current_circuit_integrated_oboeru': '電気の基礎と回路を流れる電流の大きさ（統合）',
      'sci.physics.current_compass_oboeru': '流れる電流と方位磁針',
      'sci.physics.current_effect_heating_oboeru': '電流の作用①（発熱）',
      'sci.physics.current_effect_magnetic_oboeru': '電流の作用②（磁界）',
      'sci.physics.current_magnitude_oboeru': '電気の基礎と回路を流れる電流の大きさ（統合）',
      'sci.physics.current_voltage_circuit_oboeru': '電気の基礎（乾電池・回路）',
      'sci.physics.electricity_conductivity_basic_oboeru': '電気（乾電池と豆電球）',      'sci.physics.force_motion_pulley_integrated_oboeru': '力と運動（浮力・かっ車・輪じく）統合版',
      'sci.physics.heat_properties_oboeru': '熱の性質とものの変化',
      'sci.physics.lever_weight_basic_oboeru': 'てこのつり合い',
      'sci.physics.light_properties_oboeru': '光の性質',
      'sci.physics.light_reflection_refraction_oboeru': '光の性質②（反射・屈折・影）',
      'sci.physics.moving_weight_oboeru': 'ふりことおもりの運動',
      'sci.physics.pendulum_moving_weight_integrated_oboeru': 'ふりことおもりの運動',
      'sci.physics.pendulum_oboeru': 'ふりことおもりの運動',
      'sci.physics.sound_properties_oboeru': '音の性質',
      'sci.physics.spring_force_buoyancy_integrated_oboeru': 'ばねと力・ばねと浮力統合版',      'sci.physics.weight_volume_basic_oboeru': 'つり合いとてんびん',
    };
    // eraMapをグローバルに公開（script.jsからアクセス可能にする）
    window.eraMap = eraMap;
    
    // era変数はscript.jsで既に宣言されているため、ここではwindow.eraのみ設定
    // script.jsより後に実行されるため、eraLabelの設定を行う
    (function() {
      const era = new URLSearchParams(location.search).get("era") || window.era || "sci.biology.seasons_living_things_oboeru";
      const mode = new URLSearchParams(location.search).get("mode") || window.mode || "oboeru";
      
      // era変数をグローバルに公開（他のスクリプトから参照可能にする）
      window.era = era;
      window.mode = mode;
      
      const eraLabelElement = document.getElementById("eraLabel");
      if (eraLabelElement && eraMap[era]) {
        const lessonTitle = eraMap[era] || era;
        eraLabelElement.textContent = lessonTitle;
        // ブラウザのタブタイトルを実際のレッスンタイトルに更新
        document.title = `中学受験理科｜${lessonTitle}`;
      }
    })();
    
  </script>
</body>
</html>

