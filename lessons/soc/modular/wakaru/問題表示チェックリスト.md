# 問題表示チェックリスト（4203_heian_period ～ 4205_muromachi_period）

## ✅ 確認済み項目

### 1. ファイルの存在確認
- ✅ `lessons/soc/modular/wakaru/4203_heian_period.js` - 存在
- ✅ `lessons/soc/modular/wakaru/4204_kamakura_period.js` - 存在
- ✅ `lessons/soc/modular/wakaru/4205_muromachi_period.js` - 存在

### 2. ファイルの構文エラー
- ✅ `4203_heian_period.js` - 177行目の不要な`</div>`タグを削除済み
- ✅ `4204_kamakura_period.js` - 問題なし
- ✅ `4205_muromachi_period.js` - 問題なし
- ✅ すべてのファイルで`window.questions = [`で始まり、`];`で終わっている

### 3. loader.jsのマッピング
- ✅ `'4203_heian_period': '4203_heian_period.js'` - 124行目に登録済み
- ✅ `'4204_kamakura_period': '4204_kamakura_period.js'` - 125行目に登録済み
- ✅ `'4205_muromachi_period': '4205_muromachi_period.js'` - 126行目に登録済み
- ✅ wakaruモードで`../wakaru/`ディレクトリから読み込むロジック（186-189行目）

### 4. catalog.jsonの登録
- ✅ `4203_heian_period` - 正しく登録済み
- ✅ `4204_kamakura_period` - 正しく登録済み
- ✅ `4205_muromachi_period` - 正しく登録済み

### 5. index_modular.htmlのeraMap
- ✅ `'4203_heian_period': '平安時代'` - 103行目に登録済み
- ✅ `'4204_kamakura_period': '鎌倉時代'` - 104行目に登録済み
- ✅ `'4205_muromachi_period': '室町時代'` - 105行目に登録済み

## 🔍 追加確認が必要な項目

### 6. ブラウザのコンソールエラー
ブラウザの開発者ツール（F12）で以下を確認：
- [ ] コンソールにエラーメッセージが表示されていないか
- [ ] `window.questions`が正しく定義されているか（`console.log(window.questions)`で確認）
- [ ] ファイルが正しく読み込まれているか（Networkタブで確認）

### 7. ファイルパスの確認
wakaruモードで読み込まれるファイルパス：
- `../wakaru/4203_heian_period.js`（oboeruディレクトリから見た相対パス）
- 実際のファイルパス: `lessons/soc/modular/wakaru/4203_heian_period.js`

### 8. キャッシュの問題
- [ ] ブラウザのキャッシュをクリア（Ctrl+Shift+R または Ctrl+F5）
- [ ] ハードリロードを実行

## 🛠️ トラブルシューティング手順

1. **ブラウザのコンソールを開く（F12）**
2. **Networkタブでファイルの読み込みを確認**
   - `4203_heian_period.js`が404エラーになっていないか
   - ファイルが正しく読み込まれているか
3. **Consoleタブでエラーを確認**
   - `window.questions`が`undefined`になっていないか
   - JSON構文エラーが出ていないか
4. **手動で確認**
   ```javascript
   // ブラウザのコンソールで実行
   console.log(window.questions);
   console.log(window.questions ? window.questions.length : 'undefined');
   ```

## 📝 修正履歴

- 2025-01-XX: `4203_heian_period.js`の177行目の不要な`</div>`タグを削除

